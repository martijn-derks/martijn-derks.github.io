<!doctype html>
<!--
CHANGELOG
2025-08-16  layout 1.2.0      • Print-voorbeelden: opent samenvatting/volledig in nieuw venster; handmatig printen (Cmd-P)
2025-08-16  data 2025.08.16.2 • Naamgeving: overal “Magnolia” (zonder “beverboom”)
2025-08-16  layout 1.1.1      • Afvink-vakjes per taak verwijderd; filters/zoek behouden
2025-08-16  data 2025.08.16.1 • Benamingen geharmoniseerd naar NL
2025-08-16  layout 1.1.0      • Klikbare taken + filters/zoek + versiebeheer + printknoppen
-->
<html lang="nl" data-layout-version="1.2.0" data-data-version="2025.08.16.2">
<head>
  <meta charset="utf-8" />
  <meta name="gptuin-layout-version" content="1.2.0">
  <meta name="gptuin-data-version" content="2025.08.16.2">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tuinplanning 2025 — Weekendoverzicht (klik voor details)</title>
  <style>
    :root{
      --fg:#161b22; --muted:#6b7280; --accent:#2a7a4d; --rule:#e5e7eb; --bg:#ffffff; --card:#f8fafc;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg)}
    body{font:16px/1.55 -apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto,Helvetica,Arial}
    .wrap{max-width:920px;margin:40px auto;padding:0 24px 80px}
    header{margin-bottom:18px}
    h1{font-size:32px;line-height:1.2;margin:0 0 6px;font-weight:800}
    .sub{color:var(--muted);font-size:14px;margin-bottom:14px}
    hr{border:none;border-top:2px solid var(--rule);margin:14px 0 22px}
    h2{font-size:22px;margin:28px 0 10px}
    .month{page-break-inside:avoid}
    details.task{background:var(--card);border:1px solid var(--rule);border-left:5px solid var(--accent);
      border-radius:12px;padding:0;margin:10px 0}
    summary{list-style:none;cursor:pointer;padding:12px 14px;user-select:none;display:flex;align-items:baseline;gap:8px}
    summary::-webkit-details-marker{display:none}
    .date{font-weight:800}
    .title{font-weight:600}
    .more{padding:0 16px 14px 16px;border-top:1px dashed var(--rule)}
    .more ul{margin:8px 0 0 18px}
    .note{color:var(--muted);font-size:13px;margin-top:10px}
    .split{height:1px;background:var(--rule);margin:26px 0}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 0}
    .btn{border:1px solid var(--rule);background:#fff;padding:6px 10px;border-radius:8px;cursor:pointer}
    .btn:hover{border-color:var(--accent)}
    /* Extra styling voor zoek/filters */
    #tools{gap:8px;flex-wrap:wrap}
    #tools input[type="search"]{border:1px solid var(--rule);padding:6px 10px;border-radius:8px}
    #tools label.btn{display:inline-flex;align-items:center;gap:6px}

    /* (oude printknoppen niet meer gebruikt; we tonen nu een voorbeeld in nieuw venster) */
    @media print{
      .toolbar { display:none !important; }
      .wrap{padding:0 20px}
      h1{font-size:26px}
      h2{font-size:18px;margin:18px 0 8px}
      details.task{break-inside:avoid}
      .split{page-break-after:always}
      * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Tuinplanning 2025 — Weekendoverzicht (klik voor details)</h1>
    <div class="sub">Alle klussen op <strong>zaterdagen</strong>. Klik op de datumregel om de toelichting te openen/sluiten. Locaties: appel (achter, langs sloot), peer (achter, onder wilg), druiven (bij veranda).</div>

    <!-- TOOLBAR: zoek, filters, open/dicht, reset, PRINT-VOORBEELDEN -->
    <div class="toolbar" id="tools">
      <input type="search" id="q" placeholder="Zoek (bijv. druif, snoei, gazon)…" class="btn" style="min-width:260px" />
      <label class="btn"><input type="checkbox" class="tag" value="druif" checked> Druif</label>
      <label class="btn"><input type="checkbox" class="tag" value="fruit" checked> Appel/Peer</label>
      <label class="btn"><input type="checkbox" class="tag" value="gazon" checked> Gazon</label>
      <label class="btn"><input type="checkbox" class="tag" value="snoei" checked> Snoei</label>
      <label class="btn"><input type="checkbox" class="tag" value="vaste" checked> Vaste planten</label>
      <label class="btn"><input type="checkbox" class="tag" value="bollen" checked> Bollen</label>
      <button class="btn" id="openAll">Alles openklappen</button>
      <button class="btn" id="closeAll">Alles dichtklappen</button>
      <button class="btn" id="reset">Reset filters</button>
      <!-- NIEUW: print-voorbeelden -->
      <button class="btn" id="previewSummary">Voorbeeld print (samenvatting)</button>
      <button class="btn" id="previewFull">Voorbeeld print (alles open)</button>
    </div>

    <hr />
  </header>

  <!-- JAN -->
  <section class="month" id="jan">
    <h2>Januari</h2>
    <details class="task">
      <summary><span class="date">Za 18 jan</span> <span class="title">Wintersnoei — Druif; Appel &amp; Peer</span></summary>
      <div class="more">
        <ul>
          <li><strong>Druif:</strong> alle scheuten tot <strong>2 knoppen</strong>; dode/zwakke takken weg; vóór sapstroom snoeien.</li>
          <li><strong>Appel &amp; peer (leivorm):</strong> kruisend/naar binnen weg; <strong>3–4 hoofdtakken</strong> per etage; zijscheuten tot <strong>3 knoppen</strong>.</li>
          <li><em>Weer:</em> droog, vorstvrij. Gereedschap ontsmetten.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- FEB -->
  <section class="month" id="feb">
    <h2>Februari</h2>
    <details class="task">
      <summary><span class="date">Za 15 feb</span> <span class="title">Gazon bekalken; Kerstroos (Helleborus niger) — oude bladeren weg</span></summary>
      <div class="more">
        <ul>
          <li><strong>Kalk (CaCO₃):</strong> streef-pH <strong>6,0–6,5</strong>; voortuin extra aandacht (schaduw).</li>
          <li><strong>Kerstroos:</strong> oude/lelijke bladeren bij de basis weghalen vlak vóór de bloei.</li>
          <li>Niet strooien op bevroren of kletsnat gras.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- MRT -->
  <section class="month" id="mrt">
    <h2>Maart</h2>
    <details class="task">
      <summary><span class="date">Za 8 mrt</span> <span class="title">Snoei — Rozen; Vlinderstruiken; Tuinhibiscus</span></summary>
      <div class="more">
        <ul>
          <li><strong>Rozen:</strong> terug tot <strong>3–5 ogen</strong> (±15–20 cm); dood/dun hout weg; na snoei rozenmest.</li>
          <li><strong>Vlinderstruik (Buddleja):</strong> tot <strong>30–50 cm</strong> boven de grond; <strong>3–5</strong> hoofdtakken laten staan.</li>
          <li><strong>Tuinhibiscus (Hibiscus syriacus):</strong> hoofdtakken <strong>1/3</strong> inkorten; kruisende/zwakke takken weg; open hart.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 15 mrt</span> <span class="title">Voorjaarsbemesting gazon; Lampenpoetsersgras terug; Klokjesbloem ‘Emerald’ opschonen</span></summary>
      <div class="more">
        <ul>
          <li><strong>Gazon:</strong> NPK ca. <strong>12-10-18</strong>; voortuin extra belangrijk i.v.m. mosdruk.</li>
          <li><strong>Lampenpoetsersgras (Pennisetum):</strong> pollen tot <strong>±10 cm</strong> terugknippen (veranda &amp; onder wilg).</li>
          <li><strong>Klokjesbloem ‘Emerald’ (Campanula):</strong> dode/lelijke stengels weg; licht vormgeven.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 22 mrt</span> <span class="title">Druif — laatste kans wintersnoei</span></summary>
      <div class="more">
        <ul>
          <li>Nog niet gedaan? Scheuten tot <strong>2 knoppen</strong> terug; werk vóór start sapstroom.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 29 mrt</span> <span class="title">Maart (slot) — Magnolia; Lavendel; Hortensia; Afrikaanse lelie</span></summary>
      <div class="more">
        <ul>
          <li><strong>Magnolia:</strong> dunne laag compost/koemest; wortels oppervlakkig.</li>
          <li><strong>Lavendel:</strong> vormsnoei tot net boven jong groen; <em>niet</em> in oud hout.</li>
          <li><strong>Hortensia:</strong> bloemresten weg; oudste takken (≥4 jr) bij de basis weg.</li>
          <li><strong>Afrikaanse lelie (Agapanthus):</strong> oude/lelijke bladeren verwijderen; handje compost.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- APR -->
  <section class="month" id="apr">
    <h2>April</h2>
    <details class="task">
      <summary><span class="date">Za 5 apr</span> <span class="title">Prachtkaars (Gaura) terugknip; Druif scheuten aanbinden</span></summary>
      <div class="more">
        <ul>
          <li><strong>Prachtkaars:</strong> stevig terug tot <strong>±10 cm</strong> → compactere pol.</li>
          <li><strong>Druif:</strong> jonge scheuten aan draden binden (niet knellen).</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 12 apr</span> <span class="title">Voortuin gazon — extra verticuteren</span></summary>
      <div class="more">
        <ul>
          <li>Mos/vilt verwijderen; bijzaaien <strong>schaduwgrasmengsel</strong> indien nodig.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 19 apr</span> <span class="title">Achtertuin verticuteren; bladluis-check; Krentenboom observatie</span></summary>
      <div class="more">
        <ul>
          <li><strong>Achtergazon:</strong> verticuteren; licht navoeden.</li>
          <li><strong>Fruitbomen:</strong> luizen inspecteren; evt. zachte zeep/biologisch.</li>
          <li><strong>Krentenboom (Amelanchier):</strong> tijdens bloei niet snoeien.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 26 apr</span> <span class="title">Hortensia — bemesten</span></summary>
      <div class="more">
        <ul>
          <li>Organische mest of hortensia-mest conform verpakking; water geven na strooien.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- MEI -->
  <section class="month" id="mei">
    <h2>Mei</h2>
    <details class="task">
      <summary><span class="date">Za 10 mei</span> <span class="title">Druif scheutselectie; Appel &amp; Peer vruchtdunning</span></summary>
      <div class="more">
        <ul>
          <li><strong>Druif:</strong> overtollige scheuten weg; sterkste laten staan.</li>
          <li><strong>Appel &amp; peer:</strong> dunning tot <strong>1 vrucht per tros</strong>.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 17 mei</span> <span class="title">Druif — start schimmelpreventie</span></summary>
      <div class="more">
        <ul>
          <li>Bij vochtig weer: zwavel of natriumbicarbonaat; om de 2 weken herhalen indien nodig.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 24 mei</span> <span class="title">Krentenboom lichte snoei; Lampenpoetsersgras delen (optioneel)</span></summary>
      <div class="more">
        <ul>
          <li><strong>Krentenboom:</strong> na bloei alleen storende takken bijwerken.</li>
          <li><strong>Lampenpoetsersgras:</strong> te grote/holle pollen delen; luchtige bodem.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- JUN -->
  <section class="month" id="jun">
    <h2>Juni</h2>
    <details class="task">
      <summary><span class="date">Za 7 jun</span> <span class="title">Druif — zomersnoei</span></summary>
      <div class="more">
        <ul>
          <li>Overtollige scheuten weg; blad rond trossen luchtig voor zon &amp; ventilatie.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 14 jun</span> <span class="title">Magnolia — lichte correcties</span></summary>
      <div class="more">
        <ul>
          <li>Na bloei alleen dode/storende takken wegnemen; niet op zware wortels graven.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 21 jun</span> <span class="title">Appel &amp; Peer zomersnoei; Waterlot-check</span></summary>
      <div class="more">
        <ul>
          <li><strong>Leivorm:</strong> nieuwe scheuten tot <strong>3 bladeren</strong> achter de vrucht.</li>
          <li><strong>Waterlot:</strong> bij moerbei, appel, peer, sierappel wegnemen.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 28 jun</span> <span class="title">Moerbei vormsnoei; Amberboom; Krentenboom</span></summary>
      <div class="more">
        <ul>
          <li><strong>Moerbei:</strong> storende takken terug; kroon luchtig.</li>
          <li><strong>Amberboom (Liquidambar):</strong> scheuten tot <strong>2–3 bladeren</strong> achter liggers.</li>
          <li><strong>Krentenboom:</strong> rijping volgen; evt. oogst.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- JUL -->
  <section class="month" id="jul">
    <h2>Juli</h2>
    <details class="task">
      <summary><span class="date">Za 5 jul</span> <span class="title">Druif — dieven &amp; bladbeheer</span></summary>
      <div class="more">
        <ul>
          <li>Nieuwe dieven weg; blad uitdunnen rond trossen voor lucht &amp; licht.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 12 jul</span> <span class="title">Voortuin bemesten; Prachtkaars zomersnoei</span></summary>
      <div class="more">
        <ul>
          <li><strong>Gazon voortuin:</strong> lichte gift (schaduw/mosdruk).</li>
          <li><strong>Prachtkaars:</strong> ±<strong>1/3</strong> van stelen terug voor stevigheid en doorbloei.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 19 jul</span> <span class="title">Achtertuin gazon — 2e bemesting</span></summary>
      <div class="more">
        <ul>
          <li>Langzaamwerkende mest (bv. NPK 15-5-20); beregenen indien droog.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 26 jul</span> <span class="title">Vaste planten bijwerken; Lavendel zomersnoei</span></summary>
      <div class="more">
        <ul>
          <li>Uitgebloeide stengels weg (Prachtkaars, Klokjesbloem, Afrikaanse lelie).</li>
          <li>Lavendel: bloemstelen/topjes weg; <em>niet</em> in oud hout.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- AUG -->
  <section class="month" id="aug">
    <h2>Augustus</h2>
    <details class="task">
      <summary><span class="date">Za 2 aug</span> <span class="title">Druif toppen; Vlinderstruik dode pluimen weg</span></summary>
      <div class="more">
        <ul>
          <li><strong>Druif:</strong> scheuten terug tot <strong>6 bladeren</strong> voorbij laatste tros.</li>
          <li><strong>Vlinderstruik:</strong> uitgebloeide pluimen wegnemen voor doorbloei.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 16 aug</span> <span class="title">Waterlot-check; Vijg — start wekelijkse check</span></summary>
      <div class="more">
        <ul>
          <li>Waterloten bij moerbei/appel/peer/sierappel wegnemen.</li>
          <li><strong>Vijg:</strong> vanaf nu <strong>elke zaterdag</strong> rijpheid checken t/m 4 okt (zacht, geurig, steeltje hangt).</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 23 aug</span> <span class="title">Klokjesbloem ‘Emerald’ — plantplek voorbereiden</span></summary>
      <div class="more">
        <ul>
          <li>Bodem los tot <strong>25 cm</strong>; <strong>1–2 cm</strong> compost in bovenlaag; onkruidvrij.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- SEP -->
  <section class="month" id="sep">
    <h2>September</h2>
    <details class="task">
      <summary><span class="date">Za 6 sep</span> <span class="title">Gipskruid; Voortuin verticuteren; Klokjesbloem planten; Druif oogst; Afrikaanse lelie stengels</span></summary>
      <div class="more">
        <ul>
          <li><strong>Gipskruid (Gypsophila):</strong> pol <strong>½–⅔</strong> terug; luchtig houden.</li>
          <li><strong>Voortuin:</strong> 2e keer verticuteren; evt. schaduwgras bijzaaien.</li>
          <li><strong>Klokjesbloem ‘Emerald’:</strong> <strong>9 stuks</strong>, <strong>30 cm</strong> driehoeksverband; goed inwateren.</li>
          <li><strong>Druif:</strong> oogst bij volle suikerrijpheid.</li>
          <li><strong>Afrikaanse lelie:</strong> uitgebloeide stengels aan basis weg.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 13 sep</span> <span class="title">Appel &amp; Peer — oogst</span></summary>
      <div class="more">
        <ul>
          <li>Plukken als vrucht bij lichte draai makkelijk loslaat; koel bewaren.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- OKT -->
  <section class="month" id="okt">
    <h2>Oktober</h2>
    <details class="task">
      <summary><span class="date">Za 4 okt</span> <span class="title">Gazon — najaarsbemesting</span></summary>
      <div class="more">
        <ul>
          <li>Kaliumrijke mest (bv. NPK 6-5-20) voor winterhardheid; water in bij droogte.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 11 okt</span> <span class="title">Sierui ‘Drumstick’ (Allium sphaerocephalon) — bollen planten</span></summary>
      <div class="more">
        <ul>
          <li>Plantdiepte <strong>10–15 cm</strong>; in groepjes voor het beste effect.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 18 okt</span> <span class="title">Borders — winterklaar maken</span></summary>
      <div class="more">
        <ul>
          <li>Afgestorven stengels weg; vorstgevoelige soorten afdekken.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 25 okt</span> <span class="title">Kerstroos mulch; Lavendel laatste lichte snoei</span></summary>
      <div class="more">
        <ul>
          <li><strong>Kerstroos:</strong> dunne laag compost/bladaarde rondom.</li>
          <li><strong>Lavendel:</strong> bloemresten/uitstekende takjes weg; <em>niet</em> in oud hout.</li>
        </ul>
      </div>
    </details>
  </section>

  <div class="split"></div>

  <!-- NOV -->
  <section class="month" id="nov">
    <h2>November</h2>
    <details class="task">
      <summary><span class="date">Za 8 nov</span> <span class="title">Amberboom (leivorm) — lichte correcties</span></summary>
      <div class="more">
        <ul>
          <li>Kleine vormcorrecties; hoofdsnoei blijft zomers (jun).</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 15 nov</span> <span class="title">Herfstanemoon — terugknippen</span></summary>
      <div class="more">
        <ul>
          <li>Na eerste vorst stengels tot de grond wegnemen zodra loof afgestorven is.</li>
        </ul>
      </div>
    </details>

    <details class="task">
      <summary><span class="date">Za 22 nov</span> <span class="title">Olijf &amp; Vijg — vorstbescherming</span></summary>
      <div class="more">
        <ul>
          <li>Kroon inpakken met vliesdoek bij aanhoudende vorst; potten inpakken of binnenhalen.</li>
        </ul>
      </div>
    </details>
  </section>

  <p class="note">Notities: voortuin gazon ±60 m² (schaduw, handmaaier). Robotmaaier in achtertuin. Snoei bij droog weer; niet bemesten bij vorst. Wilg bewust niet opgenomen.</p>
</div>

<!-- Versies + debugbadge -->
<script>
(function(){
  const html = document.documentElement;
  const LAYOUT_VERSION = html.dataset.layoutVersion
    || document.querySelector('meta[name="gptuin-layout-version"]')?.content
    || '0.0.0';
  const DATA_VERSION = html.dataset.dataVersion
    || document.querySelector('meta[name="gptuin-data-version"]')?.content
    || '0000.00.00';
  window.GPTUIN = { LAYOUT_VERSION, DATA_VERSION };

  if (new URLSearchParams(location.search).get('debug') === '1') {
    const b = document.createElement('div');
    b.textContent = `Layout ${LAYOUT_VERSION} • Data ${DATA_VERSION}`;
    Object.assign(b.style, {
      position:'fixed', right:'12px', bottom:'12px', padding:'6px 10px',
      background:'#0008', color:'#fff', borderRadius:'8px', font:'12px/1.3 system-ui', zIndex:9999
    });
    document.body.appendChild(b);
  }
})();
</script>

<!-- Zoek + filters -->
<script>
(function(){
  const details = Array.from(document.querySelectorAll('details.task'));
  // Tags op basis van NL/Latijn
  const map = [
    [/druif/,                          ['druif','snoei','fruit']],
    [/(appel|peer)/,                   ['fruit','snoei']],
    [/gazon|verticut|kalk|bemest/,     ['gazon']],
    [/(vlinderstruik|buddleja)/,       ['snoei','vaste']],
    [/(tuinhibiscus|hibiscus)/,        ['snoei','heester']],
    [/(lavendel)/,                     ['vaste','snoei']],
    [/(hortensia|hydrangea)/,          ['vaste','snoei']],
    [/(klokjesbloem|campanula)/,       ['vaste']],
    [/(lampenpoetsersgras|pennisetum)/,['vaste']],
    [/(prachtkaars|gaura|oenothera)/,  ['vaste','snoei']],
    [/(afrikaanse lelie|agapanthus)/,  ['vaste']],
    [/(magnolia)/,                     ['heester']],
    [/(krentenboom|amelanchier)/,      ['heester']],
    [/(amberboom|liquidambar)/,        ['boom','snoei']],
    [/(gipskruid|gypsophila)/,         ['vaste','bollen']],
    [/(sierui|allium)/,                ['bollen']],
    [/(vijg|ficus carica)/,            ['fruit']]
  ];
  const kindTags = [
    [/snoei|terugknip|vormsnoei|zomer|winter/, 'snoei'],
    [/bemest/, 'bemesting'],
    [/plantplek|aanplant|bollen|planten/, 'bollen'],
  ];

  details.forEach(d => {
    const txt = d.querySelector('summary')?.innerText?.toLowerCase() || '';
    const tags = new Set();
    map.forEach(([re, tg]) => { if(re.test(txt)) tg.forEach(t=>tags.add(t)); });
    kindTags.forEach(([re, t]) => { if(re.test(txt)) tags.add(t); });
    if(/gazon/.test(txt)) tags.add('gazon');
    if(tags.size===0) tags.add('overig');
    d.dataset.tags = Array.from(tags).join(',');
  });

  // Zoekveld & tag-filters
  const q = document.getElementById('q');
  const tagBoxes = Array.from(document.querySelectorAll('.tag'));
  function filter(){
    const qv = (q?.value || '').toLowerCase();
    const active = new Set(tagBoxes.filter(b=>b.checked).map(b=>b.value));
    details.forEach(d => {
      const text = d.innerText.toLowerCase();
      const tags = (d.dataset.tags||'').split(',');
      const hasTag = active.size===0 || tags.some(t=>active.has(t));
      const hasText = !qv || text.includes(qv);
      d.style.display = (hasTag && hasText) ? '' : 'none';
    });
  }
  q?.addEventListener('input', filter);
  tagBoxes.forEach(b => b.addEventListener('change', filter));

  // Alles open/dicht + reset
  document.getElementById('openAll')?.addEventListener('click', () => details.forEach(d => d.open = true));
  document.getElementById('closeAll')?.addEventListener('click', () => details.forEach(d => d.open = false));
  document.getElementById('reset')?.addEventListener('click', () => {
    if(q) q.value = ''; tagBoxes.forEach(b=>b.checked=true); filter();
  });

  // Init
  filter();
})();
</script>

<!-- PRINT-VOORBEELDEN (nieuw tabblad) -->
<script>
(function(){
  // Bouw printfijne HTML op basis van de huidige content
  function buildPreviewHTML(mode){
    const title = document.querySelector('h1')?.textContent || 'Tuinplanning';
    const sub   = document.querySelector('.sub')?.textContent || '';
    const months = Array.from(document.querySelectorAll('section.month'));
    const layoutV = (window.GPTUIN && GPTUIN.LAYOUT_VERSION) || '';
    const dataV   = (window.GPTUIN && GPTUIN.DATA_VERSION)   || '';

    function esc(s){ return String(s).replace(/[&<>"]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m])); }

    let body = `<header><h1>${esc(title)}</h1><div class="sub">${esc(sub)}</div><div class="meta">Layout ${esc(layoutV)} • Data ${esc(dataV)} • Modus: ${mode==='summary'?'samenvatting':'volledig'}</div><hr></header>`;

    months.forEach(sec => {
      const h2 = sec.querySelector('h2')?.textContent || '';
      body += `<section class="month"><h2>${esc(h2)}</h2>`;
      const tasks = Array.from(sec.querySelectorAll('details.task'));
      if(mode === 'summary'){
        body += '<ul class="summary">';
        tasks.forEach(d => {
          const dt = d.querySelector('.date')?.textContent || '';
          const ti = d.querySelector('.title')?.textContent || '';
          body += `<li><span class="date">${esc(dt)}</span> <span class="title">${esc(ti)}</span></li>`;
        });
        body += '</ul>';
      } else {
        tasks.forEach(d => {
          const dt = d.querySelector('.date')?.textContent || '';
          const ti = d.querySelector('.title')?.textContent || '';
          const more = d.querySelector('.more')?.innerHTML || '';
          body += `<div class="task"><div class="sum"><span class="date">${esc(dt)}</span> <span class="title">${esc(ti)}</span></div><div class="more">${more}</div></div>`;
        });
      }
      body += `</section>`;
    });

    return `<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>${esc(title)} — ${mode==='summary'?'Samenvatting':'Volledig'}</title>
<style>
  :root{ --fg:#111827; --muted:#6b7280; --rule:#e5e7eb; --accent:#2a7a4d; --bg:#fff; }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--fg)}
  body{font:15px/1.48 system-ui,-apple-system,Segoe UI,Inter,Roboto,Helvetica,Arial}
  .wrap{max-width:900px;margin:28px auto;padding:0 20px 48px}
  h1{font-size:26px;margin:0 0 4px;font-weight:800}
  .sub{color:var(--muted);font-size:13px;margin-bottom:6px}
  .meta{color:var(--muted);font-size:12px;margin-bottom:12px}
  hr{border:none;border-top:2px solid var(--rule);margin:10px 0 18px}
  h2{font-size:18px;margin:18px 0 8px}
  .summary{list-style:none;margin:0;padding:0}
  .summary li{padding:6px 8px;border:1px solid var(--rule);border-left:4px solid var(--accent);border-radius:10px;margin:6px 0}
  .summary .date{font-weight:700;margin-right:6px}
  .task{border:1px solid var(--rule);border-left:4px solid var(--accent);border-radius:10px;margin:8px 0}
  .task .sum{padding:8px 10px;font-weight:600}
  .task .more{border-top:1px dashed var(--rule);padding:8px 12px}
  @media print{
    .wrap{padding:0 16px}
    h1{font-size:22px}
    h2{font-size:16px;margin:14px 0 6px}
    .task,.summary li{break-inside:avoid}
  }
</style>
</head>
<body>
  <div class="wrap">
    ${body}
  </div>
</body>
</html>`;
  }

  function openPreview(mode){
    const w = window.open('', '_blank', 'noopener,noreferrer');
    if(!w){ alert('Pop-up geblokkeerd. Sta pop-ups toe of open in een nieuw tabblad.'); return; }
    const html = buildPreviewHTML(mode);
    w.document.open(); w.document.write(html); w.document.close();
    // Geen automatische print: jij drukt zelf op Cmd-P
  }

  document.getElementById('previewSummary')?.addEventListener('click', () => openPreview('summary'));
  document.getElementById('previewFull')?.addEventListener('click', () => openPreview('full'));
})();
</script>

</body>
</html>
